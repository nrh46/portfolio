<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lab 1 - MAE 4190: Fast Robots</title>

  <style>
    /* -------------------- Base / Reset -------------------- */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body { width: 100%; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;
      line-height: 1.65;
      color: #333;
      background-color: #f5f5f5;

      /* Make sure long content wraps instead of going offscreen */
      overflow-x: hidden;
      word-break: normal;
      overflow-wrap: anywhere;
    }

    /* Ensure media never causes horizontal overflow */
    img, video, canvas, svg { max-width: 100%; height: auto; display: block; }

    /* -------------------- Layout -------------------- */
    header {
      background-color: #2c3e50;
      color: #fff;
      padding: 2rem 1rem;
      text-align: center;
    }
    header h1 { font-size: 2rem; margin-bottom: 0.5rem; }
    header p { font-size: 1.1rem; opacity: 0.92; }

    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    section {
      background-color: #fff;
      padding: 2rem;
      margin-bottom: 2rem;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    section h2 {
      color: #2c3e50;
      margin-bottom: 1rem;
      border-bottom: 2px solid #3498db;
      padding-bottom: 0.5rem;
    }

    section h3 {
      margin-top: 1.25rem;
      margin-bottom: 0.35rem;
      color: #2c3e50;
    }

    p { margin: 0.5rem 0 0.75rem; }

    /* -------------------- Images -------------------- */
    .lab-image {
      width: 100%;
      max-width: 720px;     /* keeps images from looking huge on wide screens */
      margin: 0.75rem auto 1rem;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.12);
      box-shadow: 0 1px 2px rgba(0,0,0,0.06);
    }

    /* -------------------- Code Blocks (Black Box + Color) -------------------- */
    pre {
      margin: 0.75rem 0 1.25rem;
      padding: 1rem 1rem;
      background: #0b0f14;              /* near-black */
      border: 2px solid #000;           /* black box border */
      border-radius: 10px;
      overflow-x: auto;                 /* allow horizontal scroll for long code */
      max-width: 100%;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95rem;
      line-height: 1.55;
      color: #e6edf3;                   /* readable on dark background */
      white-space: pre;                 /* keep formatting */
    }

    /* Simple “good enough” syntax highlighting without JS libs */
    /* Comments */
    .code-arduino .comment,
    .code-python  .comment { color: #7ee787; }

    /* Keywords */
    .code-arduino .kw { color: #ff7b72; font-weight: 600; }
    .code-python  .kw { color: #ff7b72; font-weight: 600; }

    /* Types / builtins */
    .code-arduino .type { color: #79c0ff; }
    .code-python  .bi   { color: #79c0ff; }

    /* Strings / numbers */
    .code-arduino .str,
    .code-python  .str { color: #a5d6ff; }
    .code-arduino .num,
    .code-python  .num { color: #d2a8ff; }

    footer {
      text-align: center;
      padding: 1.25rem 1rem 2rem;
      color: #666;
      font-size: 0.9rem;
    }

    /* Optional: slightly tighter on small screens */
    @media (max-width: 600px) {
      section { padding: 1.25rem; }
      header { padding: 1.5rem 1rem; }
    }
  </style>
</head>

<body>
  <header>
    <h1>Lab 1</h1>
    <p>MAE 4190: Fast Robots</p>
  </header>

  <main>
    <section id="lab-1a">
      <h2>1a</h2>

      <h3>Task 1</h3>
      <p>I was able to connect the Artemis board to my computer via Bluetooth.</p>

      <h3>Task 2</h3>
      <img class="lab-image" src="../assets/images/blink.jpg" alt="Blink example running on Artemis" />
      <p>I uploaded and ran the example file <em>Blink</em> in <em>0.1Basics</em>. The blue LED on the Artemis blinked.</p>

      <h3>Task 3</h3>
      <img class="lab-image" src="../assets/images/task3.jpg" alt="Serial echo output" />
      <p>I uploaded and ran the example file <em>Example4_Serial</em> in <em>Apollo3</em>. The Artemis board successfully output serial inputs.</p>

      <h3>Task 4</h3>
      <img class="lab-image" src="../assets/images/task4.jpg" alt="Temperature sensor output" />
      <p>
        I uploaded and ran the example file <em>Example2_analogRead</em> in <em>Apollo3</em> to test the Artemis temperature sensor.
        To test it, I blew on the sensor to create varied outputs.
      </p>

      <h3>Task 5</h3>
      <img class="lab-image" src="../assets/images/task5.jpg" alt="Microphone frequency output" />
      <p>
        I uploaded and ran the example file <em>Example1_MicrophoneOutput</em> in <em>PDM</em> to test the Artemis board microphone.
        To test it, I tried to hold a couple of notes using my voice. The board was able to output those frequencies, but inconsistently.
      </p>
    </section>

    <section id="lab-1b">
      <h2>1b</h2>

      <h3>Task 1</h3>
      <p>
        In this task, I sent a string from my computer to the Artemis board using the <strong>ECHO</strong> command. The board then
        returned the string in the Arduino sketch output.
      </p>

      <pre class="code-arduino"><code>
<span class="kw">case</span> <span class="type">ECHO</span>:

  <span class="type">char</span> char_arr[MAX_MSG_SIZE];

  <span class="comment">// Extract the next value from the command string as a character array</span>
  success = robot_cmd.get_next_value(char_arr);
  <span class="kw">if</span> (!success)
    <span class="kw">return</span>;

  tx_estring_value.clear();
  tx_estring_value.append(<span class="str">"Robot says -&gt; "</span>);
  tx_estring_value.append(char_arr);
  tx_estring_value.append(<span class="str">":)"</span>);
  tx_characteristic_string.writeValue(tx_estring_value.c_str());

  <span class="kw">break</span>;
</code></pre>

      <h3>Task 2</h3>
      <p>
        In this task, I filled in the <strong>SEND_THREE_FLOATS</strong> case in the Arduino code to print the three float values
        sent from my computer.
      </p>

      <pre class="code-arduino"><code>
<span class="kw">case</span> <span class="type">SEND_THREE_FLOATS</span>:
  <span class="type">float</span> flt_A, flt_B, flt_C;

  success = robot_cmd.get_next_value(flt_A);
  <span class="kw">if</span> (!success) <span class="kw">return</span>;

  success = robot_cmd.get_next_value(flt_B);
  <span class="kw">if</span> (!success) <span class="kw">return</span>;

  success = robot_cmd.get_next_value(flt_C);
  <span class="kw">if</span> (!success) <span class="kw">return</span>;

  Serial.print(<span class="str">"Three Floats: "</span>);
  Serial.print(flt_A);
  Serial.print(<span class="str">","</span>);
  Serial.print(flt_B);
  Serial.print(<span class="str">","</span>);
  Serial.println(flt_C);

  <span class="kw">break</span>;
</code></pre>

      <h3>Task 3</h3>
      <p>
        In this task, I filled in the <strong>GET_TIME_MILLIS</strong> case in the Arduino code to send the computer a string starting
        with <strong>T:</strong> indicating the current time in milliseconds.
      </p>

      <pre class="code-arduino"><code>
<span class="kw">case</span> <span class="type">GET_TIME_MILLIS</span>:
  <span class="type">int</span> time;
  time = (<span class="type">int</span>)millis();

  tx_estring_value.clear();
  tx_estring_value.append(<span class="str">"T:"</span>);
  tx_estring_value.append(time);
  tx_characteristic_string.writeValue(tx_estring_value.c_str());

  <span class="kw">break</span>;
</code></pre>

      <h3>Task 4</h3>
      <p>In this task I set up a notification handler for time data transmissions. The handler uses the ble.start_notify(ble.uuid['RX_STRING'], notification_handler) command to recieve BLE GATT characteristic changes then output them as print statements.</p>
      <pre class="code-python"><code>
<span class="comment"># notification handler</span>
<span class="kw">def</span> notification_handler(uuid, data):

  <span class="comment"># make the data into a string</span>
  received_string = ble.bytearray_to_string(data)

  <span class="comment"># parse key:value pairs</span>
  key_value_pairs = <span class="bi">dict</span>(pair.split(<span class="str">":"</span>) <span class="kw">for</span> pair <span class="kw">in</span> received_string.split(<span class="str">","</span>))

  <span class="comment"># get time value</span>
  time_value = key_value_pairs.get(<span class="str">"T"</span>, <span class="str">"Time not found"</span>)
  <span class="bi">print</span>(<span class="str">f"Time value: {time_value}"</span>)

ble.start_notify(ble.uuid[<span class="str">'RX_STRING'</span>], notification_handler)
</code></pre>

      <p>Then, for part 7, I modified the notification handler to read both temperature and time data.</p>

      <pre class="code-python"><code>
<span class="kw">def</span> notification_handler2(uuid, data):

  <span class="comment"># make the data into a string</span>
  received = ble.bytearray_to_string(data)

  <span class="comment"># parse Time:...-Temp:...</span>
  value_pairs = <span class="bi">dict</span>(pair.split(<span class="str">":"</span>) <span class="kw">for</span> pair <span class="kw">in</span> received.split(<span class="str">"-"</span>))

  time_value = value_pairs.get(<span class="str">"Time"</span>, <span class="str">"Time not found"</span>)
  temp_value = value_pairs.get(<span class="str">"Temp"</span>, <span class="str">"Temp not found"</span>)

  <span class="bi">print</span>(<span class="str">f"Time value: {time_value}"</span>)
  <span class="bi">print</span>(<span class="str">f"Temp value: {temp_value}"</span>)
</code></pre>

      <h3>Task 5</h3>
      <p>
        For this task, I wrote a loop in Python that runs the <strong>GET_TIME_MILLIS</strong> command 100 times. The data was
        transmitted to my computer every 57–66 milliseconds, which is about 15–17 transmissions per second.
      </p>
      <img class="lab-image" src="../assets/images/lab1bTask5.jpg" alt="Task 5 timing results" />

      <h3>Task 6</h3>
      <p>
        In Task 6, I created the <strong>SEND_TIME_DATA</strong> case in the Arduino sketch to record time data 100 times in a global
        array (timeArray) and then send it to my computer. I used two for loops: the first to collect and store
        values, and the second to send the data to the computer piecewise.
      </p>

      <pre class="code-arduino"><code>
<span class="kw">case</span> <span class="type">SEND_TIME_DATA</span>:
  <span class="kw">for</span> (<span class="type">int</span> i = <span class="num">0</span>; i &lt; <span class="num">100</span>; i++) {
    <span class="type">int</span> Millis;
    Millis = (<span class="type">int</span>)millis();
    timeArray[i] = Millis;
  }

  <span class="kw">for</span> (<span class="type">int</span> i = <span class="num">0</span>; i &lt; <span class="num">100</span>; i++) {
    tx_estring_value.clear();
    tx_estring_value.append(<span class="str">"T:"</span>);
    tx_estring_value.append(timeArray[i]);
    tx_characteristic_string.writeValue(tx_estring_value.c_str());
    delay(<span class="num">10</span>);
    Serial.println(timeArray[i]);
  }
  <span class="kw">break</span>;
</code></pre>

      <h3>Task 7</h3>
      <p>
        In this task, I implemented the <strong>GET_TEMP_READINGS</strong> command in the Arduino sketch to send temperature and time readings.
        I used two for loops: the first fills two global arrays to store temperature and time data 100 times, and the second sends
        those arrays piecewise to the computer. I also adjusted my notification handler to handle the new data stream.
      </p>

      <pre class="code-arduino"><code>
<span class="kw">case</span> <span class="type">GET_TEMP_READINGS</span>:
  <span class="kw">for</span> (<span class="type">int</span> i = <span class="num">0</span>; i &lt; <span class="num">100</span>; i++) {
    <span class="type">int</span> current;
    <span class="type">float</span> temp;

    current = (<span class="type">int</span>)millis();
    temptime[i] = current;

    temp = (<span class="type">float</span>)getTempDegF();
    tempArray[i] = temp;
  }

  <span class="kw">for</span> (<span class="type">int</span> i = <span class="num">0</span>; i &lt; <span class="num">100</span>; i++) {
    tx_estring_value.clear();
    tx_estring_value.append(<span class="str">"Time:"</span>);
    tx_estring_value.append(temptime[i]);
    tx_estring_value.append(<span class="str">"-"</span>);
    tx_estring_value.append(<span class="str">"Temp:"</span>);
    tx_estring_value.append(tempArray[i]);
    tx_characteristic_string.writeValue(tx_estring_value.c_str());
    delay(<span class="num">10</span>);
    Serial.println(tempArray[i]);
  }
  <span class="kw">break</span>;
</code></pre>

      <h3>Task 8</h3>
      <p>
        The first method of recording timestamp data—looping data transmission using the <strong>GET_TIME_MILLIS</strong> command—recorded
        data significantly slower than the second method. However, continual transmission enables real-time updates. This advantage is
        amplified by the fact that transmissions occur more quickly using the first method, making it more suitable for real-time feedback
        rather than rapid bulk data collection.
      </p>
      <p>
        On the other hand, the second method provides better accuracy for offline analysis. Because it rapidly collects many data points
        before transmitting, it is better for tasks like building a clear picture of the motion or temperature of the chip over time.
      </p>
      <p>
        Since the sketch takes up about 31 KB of program storage, there is still substantial memory available for buffering additional data,
        depending on the board’s remaining dynamic memory and any other runtime allocations.
      </p>
    </section>

    <section id="references">
      <h2>References</h2>
      <p>
        For this lab, I referenced the student pages of Kotie Ashie and Jack Long for help with Tasks of Lab 1b.
        I also used AI for syntax checking and troubleshooting.
      </p>
    </section>
  </main>

  <footer>
    <p>Spring 2026 Lab 1 - MAE 4190: Fast Robots</p>
  </footer>
</body>
</html>
